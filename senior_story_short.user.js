// ==UserScript==
// @name         Claude Automation - senior_story_short
// @namespace    http://tampermonkey.net/
// @version      1.0.1
// @description  ì‹œë‹ˆì–´ ìŠ¤í† ë¦¬ ìˆí¼
// @author       Atobro
// @match        https://claude.ai/project/019b0859-fb77-74a8-9eaa-1cc732eeb84e
// @updateURL    https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_story_short.user.js
// @downloadURL  https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_story_short.user.js
// @grant        GM_addStyle
// @run-at       document-end
// ==/UserScript==

(function(){'use strict';console.log('ğŸ“š Senior Story Short');let isRunning=false,currentStep=0,allResponses=[];const MAX_STEPS=7;const STEP_PROMPTS=[{name:"ê¸°ìŠ¹ì „ê²° íŒ¨í„´ í•™ìŠµ",prompt:`1ë‹¨ê³„: ì‹œë‹ˆì–´ ê°ë™ ìŠ¤í† ë¦¬ ê¸°ìŠ¹ì „ê²°\në‹¹ì‹ ì€ ì‹œë‹ˆì–´(50-70ëŒ€) ê°ë™ ìŠ¤í† ë¦¬ ì „ë¬¸ ì œì‘ìì…ë‹ˆë‹¤.\n\níŒ¨í„´ A - ì—­ê²½ ê·¹ë³µí˜•: ê¸°(í‰ë²”í•œ ì¼ìƒ ìœ„ê¸°) â†’ ìŠ¹(ì ˆë§ì  ìƒí™©) â†’ ì „(í¬ë§ ë°œê²¬) â†’ ê²°(ê·¹ì  ë°˜ì „ ê°ë™)\níŒ¨í„´ B - ë’¤ëŠ¦ì€ ê¹¨ë‹¬ìŒí˜•: ê¸°(ë‹¹ì—°í•œ ê²ƒë“¤) â†’ ìŠ¹(ìƒê³  ë‚˜ì„œ ì†Œì¤‘í•¨) â†’ ì „(í›„íšŒ ë°˜ì„±) â†’ ê²°("ì§€ê¸ˆì´ë¼ë„ ëŠ¦ì§€ ì•Šì•˜ë‹¤")\níŒ¨í„´ C - ë”°ëœ»í•œ ì¸ê°„ë¯¸í˜•: ê¸°(ì–´ë ¤ìš´ ì´ì›ƒ) â†’ ìŠ¹(ì£¼ë³€ ë¬´ê´€ì‹¬) â†’ ì „(ë”°ëœ»í•œ ì†ê¸¸) â†’ ê²°(ì„ í•œ ì˜í–¥ë ¥)\n\ní•µì‹¬ ì›ì¹™: ì‹œë‹ˆì–´ ê³µê° ì†Œì¬, ê³¼ì¥ ì—†ëŠ” ì§„ì •ì„±, ê¸ì •ì  ë©”ì‹œì§€, ì‹¤í™” ê°™ì€ ëŠë‚Œ\nì´í•´í–ˆìœ¼ë©´ 'íŒ¨í„´ í•™ìŠµ ì™„ë£Œ'`},{name:"ì½˜í…ì¸  íŠ¹ì„± í•™ìŠµ",prompt:`2ë‹¨ê³„: ì‹œë‹ˆì–´ ê°ë™ ìŠ¤í† ë¦¬ íŠ¹ì„± í•™ìŠµ\n\níƒ€ê²Ÿ: 55-75ëŒ€ ì¸ìƒ ê²½í—˜ í’ë¶€ì¸µ\ní„°ì§€ëŠ” ì£¼ì œ: ê°€ì¡±, ê±´ê°• ê·¹ë³µ, ì¸ìƒ ì¬ë„ì „, ê´€ê³„ íšŒë³µ, ì„±ì¥ ê¹¨ë‹¬ìŒ\ní›„í‚¹: "ë‹¹ì‹ ì´ë¼ë©´ ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", "í•˜ì§€ë§Œ ê²°ë§ì€ ë‹¬ëìŠµë‹ˆë‹¤", "ì‹¤í™”ì…ë‹ˆë‹¤"\nê¸ˆì§€: ê³¼ë„í•œ ì‹ íŒŒ, í˜„ì‹¤ì„± ì—†ëŠ” ì „ê°œ, ë¶€ì •ì  ê²°ë§\ní•„ìˆ˜: ì‹œë‹ˆì–´ ëˆˆë†’ì´ ê³µê°, ì ì ˆí•œ ê°ì •ì„ , í¬ë§ì  ë©”ì‹œì§€, ì—¬ìš´ ìˆëŠ” ë§ˆë¬´ë¦¬\n\nì´í•´í–ˆìœ¼ë©´ 'íŠ¹ì„± í•™ìŠµ ì™„ë£Œ'`},{name:"ì£¼ì œ ì„ íƒ",prompt:`3ë‹¨ê³„: ê°ë™ ìŠ¤í† ë¦¬ ì£¼ì œ ì„ íƒ\n\nì£¼ì œ í’€:\nê°€ì¡± ìŠ¤í† ë¦¬: ì¹˜ë§¤ ì•„ë‚´ 50ë…„ ê°„ë³‘, í™˜ê°‘ì— ëŒ€í•™ ê°„ ì—„ë§ˆ, ë’¤ëŠ¦ì€ íš¨ë„, ì¬í˜¼ ê°€ì¡±\nê±´ê°• ê·¹ë³µ: ì•” ì„ ê³  10ë…„ ìƒì¡´, ì¤‘í’ ë”›ê³  ì¬í™œ, ë‹¹ë‡¨ ê·¹ë³µ ë§ˆë¼í†¤, ì‹œë ¥ ìƒê³  ì ì í•™ìŠµ\nì¸ìƒ ì¬ë„ì „: 70ì„¸ ìœ íŠœë²„, í™˜ê°‘ ì°½ì—… ì„±ê³µ, ëŠ¦ê¹ì´ í™”ê°€ ê°œì¸ì „, 60ëŒ€ í• ë¨¸ë‹ˆ ë˜í¼\nê´€ê³„ íšŒë³µ: 30ë…„ ë§Œì˜ í™”í•´, ì´ì›ƒì´ êµ¬í•œ ìƒëª…, ì¹œêµ¬ì™€ì˜ ì¬íšŒ, ìš©ì„œì™€ í™”í•´\n\ní•˜ë‚˜ ì„ íƒ í›„ í˜•ì‹ ì¶œë ¥:\nã€ì„ íƒí•œ ì£¼ì œã€‘:\nã€ì„ íƒ ì´ìœ ã€‘:\nã€ì ìš© íŒ¨í„´ã€‘: A~C\nã€íƒ€ê²Ÿ ê°ì •ã€‘: ê°ë™/ìœ„ë¡œ/í¬ë§\nã€ì˜ˆìƒ í›„í‚¹ã€‘:`},{name:"êµ¬ì¡° ì„¤ê³„",prompt:`4ë‹¨ê³„: 40-50ì´ˆ êµ¬ì¡° ì„¤ê³„\n\nê¸°(0-8ì´ˆ): í‰ë²”í•œ ì¼ìƒ ë˜ëŠ” ìœ„ê¸° ì‹œì‘, ì£¼ì¸ê³µ ì†Œê°œ\nìŠ¹(8-20ì´ˆ): ê°ˆë“±/ìœ„ê¸° ì‹¬í™”, ì ˆë§ì  ìˆœê°„\nì „(20-40ì´ˆ): ì „í™˜ì (í¬ë§ ë°œê²¬), ê·¹ë³µ ê³¼ì •\nê²°(40-50ì´ˆ): ê°ë™ì  ê²°ë§, êµí›ˆ/ë©”ì‹œì§€, ì—¬ìš´\n\nêµ¬ì¡°í‘œ ì‘ì„± í›„ ì´ˆì•ˆ ëŒ€ë³¸ ì‘ì„±\nê°ë™ ì²´í¬: â–¡ ê³µê° ê°€ëŠ¥í•œ ì†Œì¬ â–¡ ìì—°ìŠ¤ëŸ¬ìš´ ì „ê°œ â–¡ ì§„ì •ì„± ìˆëŠ” ë©”ì‹œì§€`},{name:"3ê°œ ë²„ì „ ìƒì„±",prompt:`5ë‹¨ê³„: 3ê°œ ë²„ì „ ìƒì„±\n\në§íˆ¬: "~í–ˆìŠµë‹ˆë‹¤/~í–ˆëŠ”ë°ìš”" ë²ˆê°ˆì•„, ì‰¼í‘œ/ë§ˆì¹¨í‘œ ê¸ˆì§€, 400-550ì\n\në²„ì „ 1: ê°ë™ ì§‘ì¤‘í˜•\nã€í›„í‚¹ã€‘:\nã€ì™€ìš°ã€‘:\nã€ëŒ€ë³¸ã€‘:\n\`\`\`\n(ë‚´ìš©)\n\`\`\`\n\në²„ì „ 2: êµí›ˆ ì¤‘ì‹¬í˜•\në²„ì „ 3: í¬ë§ ë©”ì‹œì§€í˜•`},{name:"ìµœì¢… ì„ íƒ",prompt:`6ë‹¨ê³„: ìµœì¢… ëŒ€ë³¸ ì„ íƒ\n\nì„ íƒ ê¸°ì¤€: ê°ë™ì˜ ê¹Šì´, ê³µê° ê°€ëŠ¥ì„±, ë©”ì‹œì§€ ëª…í™•í•¨, ì—¬ìš´\nê²€ì¦: â–¡ í˜„ì‹¤ì„± â–¡ ê°ì •ì„  â–¡ ê¸€ììˆ˜ ì ì • â–¡ ë©”ì‹œì§€ ì „ë‹¬\n\nCTA ì˜ˆì‹œ: "ì—¬ëŸ¬ë¶„ì˜ ì¸ìƒ ì´ì•¼ê¸°ë„ ë“¤ë ¤ì£¼ì„¸ìš”", "ì˜¤ëŠ˜ë„ í¬ë§ì„ ìƒì§€ ë§ˆì„¸ìš”"\n\nìµœì¢… ì„ íƒ ë²„ì „ê³¼ ìˆ˜ì •ì‚¬í•­, ê²€ì¦ê²°ê³¼, ìµœì¢… ëŒ€ë³¸ ì¶œë ¥`},{name:"ìµœì¢… ì¶œë ¥",prompt:`7ë‹¨ê³„: ìµœì¢… ì¶œë ¥\n\nâ›” ë§ˆì»¤ ë°– í…ìŠ¤íŠ¸ ê¸ˆì§€\n\n---SCRIPT_START---\n(ìµœì¢… ëŒ€ë³¸ ì „ì²´)\n---SCRIPT_END---\n\n---PROMPTS_START---\n1. Elderly Korean couple holding hands, park bench sunset, emotional connection, warm golden light, 9:16\n2. Old family photo album with memories, hands turning pages, nostalgic atmosphere, soft lighting, 9:16\n3. Korean grandmother overcoming difficulty, determined expression, hospital rehabilitation, inspiring mood, 9:16\n4. Senior writing letter diary emotional expression, intimate moment, natural window light, vertical, 9:16\n5. Two seniors reuniting after long time, emotional embrace, tears of joy, heartwarming scene, 9:16\n6. Korean grandfather achieving dream old age, proud happy expression, celebratory atmosphere, 9:16\n7. Senior helping another senior, community support, kindness spreading, warm afternoon light, 9:16\n8. Close-up wrinkled hands life experience, holding young hand, generational connection, 9:16\n9. Senior looking at mirror accepting smile, self-love concept, peaceful morning light, 9:16\n10. Korean seniors dancing together joyfully, celebrating life, active aging, golden hour glow, 9:16\n---PROMPTS_END---`}];GM_addStyle(`#script-automation-panel{position:fixed;top:20px;right:20px;width:420px;background:linear-gradient(135deg,#f093fb,#f5576c);color:white;padding:25px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.15);z-index:10000;font-family:'Segoe UI',sans-serif}#script-automation-panel h3{margin:0 0 15px 0;font-size:19px;text-align:center;font-weight:600}.category-badge{background:rgba(255,255,255,0.3);padding:6px 18px;border-radius:20px;font-size:11px;display:inline-block;margin-bottom:15px;font-weight:600}.step-counter{text-align:center;font-size:20px;font-weight:600;margin:15px 0;padding:14px;background:rgba(255,255,255,0.2);border-radius:10px}.step-name{font-size:12px;opacity:0.85;margin-top:6px}#start-btn,#stop-btn{width:100%;padding:16px;font-size:15px;font-weight:600;border:none;border-radius:10px;cursor:pointer;margin-bottom:10px;transition:all 0.3s}#start-btn{background:linear-gradient(135deg,#10B981,#34D399);color:white;box-shadow:0 4px 14px rgba(16,185,129,0.4)}#start-btn:disabled{background:#999;cursor:not-allowed;opacity:0.5}#stop-btn{background:linear-gradient(135deg,#FF6B6B,#EE5A6F);color:white;display:none}#download-btn{width:100%;padding:16px;background:linear-gradient(135deg,#3498db,#2980b9);color:white;border:none;border-radius:10px;cursor:pointer;font-weight:600;margin-bottom:10px}#download-btn:disabled{background:#999;opacity:0.5}.progress-bar{width:100%;height:6px;background:rgba(255,255,255,0.2);border-radius:3px;margin:12px 0}.progress-fill{height:100%;background:linear-gradient(90deg,#10B981,#34D399);width:0%;transition:width 0.5s}#automation-status{background:rgba(0,0,0,0.15);padding:12px;border-radius:10px;margin-top:12px;font-size:12px;max-height:160px;overflow-y:auto}.status-line{margin:4px 0;padding:6px 8px;background:rgba(255,255,255,0.1);border-radius:6px;font-size:11px;line-height:1.4}.status-line.success{background:rgba(16,185,129,0.3)}.status-line.error{background:rgba(255,107,107,0.25)}`);function sleep(ms){return new Promise(r=>setTimeout(r,ms))}function addStatus(msg,type='normal'){const s=document.getElementById('automation-status');if(!s)return;const l=document.createElement('div');l.className=`status-line ${type}`;l.textContent=`[${new Date().toLocaleTimeString()}] ${msg}`;s.insertBefore(l,s.firstChild);while(s.children.length>15)s.removeChild(s.lastChild);console.log(msg)}function updateStepDisplay(){const sc=document.getElementById('step-count'),sn=document.getElementById('step-name'),pf=document.getElementById('progress-fill');if(sc)sc.textContent=`${currentStep}/${MAX_STEPS}`;if(sn&&currentStep>0&&currentStep<=MAX_STEPS)sn.textContent=STEP_PROMPTS[currentStep-1].name;if(pf)pf.style.width=`${(currentStep/MAX_STEPS)*100}%`}function isClaudeResponding(){return!!document.querySelector('button[aria-label="Stop response"]')||!!document.querySelector('button[aria-label="ì‘ë‹µ ì¤‘ë‹¨"]')}async function waitForResponseComplete(maxWait=1800000){const start=Date.now();addStatus('â³ ì‘ë‹µ ëŒ€ê¸°');let started=false;for(let i=0;i<40;i++){if(isClaudeResponding()){started=true;addStatus('âœï¸ ì‘ë‹µ ì¤‘');break}await sleep(500)}if(!started){addStatus('âœ… ì‘ë‹µ ì™„ë£Œ');await sleep(2000);return true}let cnt=0;while(isClaudeResponding()){const elapsed=Date.now()-start;if(elapsed>maxWait)throw new Error('íƒ€ì„ì•„ì›ƒ');cnt++;if(cnt%30===0){const m=Math.floor(elapsed/60000),s=Math.floor((elapsed%60000)/1000);addStatus(`â³ ëŒ€ê¸° ì¤‘ (${m}ë¶„ ${s}ì´ˆ)`)}await sleep(1000)}addStatus('âœ… ì‘ë‹µ ì™„ë£Œ!','success');await sleep(2000);return true}async function inputPrompt(promptText,maxRetries=5){for(let attempt=1;attempt<=maxRetries;attempt++){try{addStatus(`[${attempt}/${maxRetries}] ì „ì†¡ ì‹œë„`);const inputField=document.querySelector('div.ProseMirror[contenteditable="true"]');if(!inputField)throw new Error('ì…ë ¥ í•„ë“œ ì—†ìŒ');inputField.focus();inputField.click();await sleep(200);inputField.innerHTML='';promptText.split('\n').forEach((line,i)=>{if(line.trim()){const p=document.createElement('p');p.textContent=line;inputField.appendChild(p)}else if(i<promptText.split('\n').length-1)inputField.appendChild(document.createElement('br'))});inputField.dispatchEvent(new Event('input',{bubbles:true}));await sleep(500);let sendButton=document.querySelector('button[aria-label="Send message"]');if(!sendButton){sendButton=Array.from(document.querySelectorAll('button')).find(btn=>{const svg=btn.querySelector('svg'),path=svg?.querySelector('path'),d=path?.getAttribute('d');return d?.includes('M208.49,120.49')})}if(!sendButton||sendButton.disabled)throw new Error('ì „ì†¡ ë²„íŠ¼ ì—†ìŒ');sendButton.click();addStatus('âœ… ì „ì†¡ ì„±ê³µ!','success');await waitForResponseComplete();return true}catch(error){addStatus(`âš ï¸ ì‹¤íŒ¨: ${error.message}`,'error');if(attempt<maxRetries){await sleep(attempt*2000)}else throw error}}}function collectResponse(){try{const responses=document.querySelectorAll('div[class*="font-claude-response"]');if(currentStep===MAX_STEPS){for(let i=responses.length-1;i>=0;i--){const txt=responses[i].innerText.trim();const ss='---SCRIPT_START---',se='---SCRIPT_END---',ps='---PROMPTS_START---',pe='---PROMPTS_END---';if(txt.includes(ss)&&txt.includes(se)){const script=txt.substring(txt.indexOf(ss)+ss.length,txt.indexOf(se)).trim();let prompts=[];if(txt.includes(ps)&&txt.includes(pe)){const ptxt=txt.substring(txt.indexOf(ps)+ps.length,txt.indexOf(pe)).trim();prompts=ptxt.split(/\n?\d+\.\s*/).map(l=>l.trim()).filter(l=>l.length>10);if(prompts.length<5)prompts=ptxt.split('\n').map(l=>l.trim()).filter(l=>l.length>20)}localStorage.setItem('FINAL_SCRIPT',script);window.FINAL_SCRIPT_FOR_PYTHON=script;if(prompts.length>0){localStorage.setItem('IMAGE_PROMPTS',JSON.stringify(prompts));window.IMAGE_PROMPTS=prompts;localStorage.setItem('MOTIVATION_SCRIPT_JSON',JSON.stringify({image_prompts:prompts}))}return script}}}if(responses.length>0){const last=responses[responses.length-1];return last.innerText.trim()}return ''}catch(e){console.error(e);return ''}}function createPanel(){const panel=document.createElement('div');panel.id='script-automation-panel';panel.innerHTML=`<h3>ğŸ“š ì‹œë‹ˆì–´ ìŠ¤í† ë¦¬ ìˆí¼</h3><div style="text-align:center;"><span class="category-badge">EMOTIONAL STORY</span></div><div class="step-counter">ë‹¨ê³„: <span id="step-count">0/7</span><div class="step-name" id="step-name">ëŒ€ê¸° ì¤‘</div></div><div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div><button id="start-btn">ğŸš€ ëŒ€ë³¸ ìƒì„± ì‹œì‘</button><button id="stop-btn">â¹ ì¤‘ì§€</button><button id="download-btn" disabled>âœ… ì‘ì—… ì™„ë£Œ</button><div id="automation-status"></div>`;document.body.appendChild(panel);document.getElementById('start-btn').addEventListener('click',startGeneration);document.getElementById('stop-btn').addEventListener('click',stopGeneration)}async function startGeneration(){isRunning=true;currentStep=0;allResponses=[];document.getElementById('start-btn').style.display='none';document.getElementById('stop-btn').style.display='block';document.getElementById('download-btn').disabled=true;addStatus('ğŸš€ ìƒì„± ì‹œì‘!','success');function keepAlive(){if(isRunning)requestAnimationFrame(keepAlive)}keepAlive();while(isRunning&&currentStep<MAX_STEPS){const step=STEP_PROMPTS[currentStep];currentStep++;updateStepDisplay();addStatus(`ğŸ“ ${currentStep}ë‹¨ê³„: ${step.name}`);try{const success=await inputPrompt(step.prompt);if(!success){addStatus(`âŒ ${step.name} ì‹¤íŒ¨`,'error');await sleep(3000);currentStep--;continue}await sleep(2000);let cc=0;while(cc<2){const cont=await handleContinue();if(cont){cc++;await waitForResponseComplete()}else break}const res=collectResponse();allResponses.push({step:`${currentStep}. ${step.name}`,response:res});addStatus(`âœ… ${step.name} ì™„ë£Œ`,'success')}catch(e){addStatus(`âš ï¸ ì˜¤ë¥˜: ${e.message}`,'error');await sleep(5000);currentStep--}await sleep(3000)}stopGeneration()}async function handleContinue(){await sleep(2000);const btn=Array.from(document.querySelectorAll('button')).find(b=>b.textContent.includes('Continue')||b.textContent.includes('ê³„ì†'));if(btn){btn.click();addStatus('âœ… Continue í´ë¦­');return true}return false}function stopGeneration(){isRunning=false;document.getElementById('start-btn').style.display='block';document.getElementById('stop-btn').style.display='none';if(currentStep>=MAX_STEPS){addStatus('ğŸ‰ ìƒì„± ì™„ë£Œ!','success');document.getElementById('download-btn').disabled=false}}function init(){if(!document.body){setTimeout(init,1000);return}const existing=document.getElementById('script-automation-panel');if(existing)existing.remove();try{createPanel();addStatus('âœ… ì¤€ë¹„ ì™„ë£Œ')}catch(e){console.error(e)}}document.addEventListener('keydown',e=>{if(e.key==='Escape'){const p=document.getElementById('script-automation-panel');if(p)p.style.display=p.style.display==='none'?'block':'none'}});function waitForPageLoad(){const body=document.body,main=document.querySelector('main');if(body&&main&&(document.readyState==='interactive'||document.readyState==='complete')){setTimeout(()=>{init();setTimeout(()=>{if(!document.getElementById('script-automation-panel'))init()},500)},2000)}else setTimeout(waitForPageLoad,500)}waitForPageLoad()})();(function(){'use strict';function killPopup(){document.querySelectorAll('[role="dialog"]').forEach(d=>{if((d.textContent||'').includes('Claudeë¥¼ ê³„ì†')||(d.textContent||'').includes('Continue using'))d.remove()});document.body.style.overflow=''}const obs=new MutationObserver(killPopup);obs.observe(document.body,{childList:true,subtree:true});setInterval(killPopup,2000)})();

// trigger update 2025-12-31 06:51:01
