// ==UserScript==
// @name         Claude Automation - senior_care_short
// @namespace    http://tampermonkey.net/
// @version      1.0.1
// @description  ì‹œë‹ˆì–´ ì¼€ì–´ ìˆí¼ ëŒ€ë³¸ ìƒì„±
// @author       Atobro
// @match        https://claude.ai/project/019b085a-4903-7726-a10a-11b83da590cd
// @updateURL    https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_care_short.user.js
// @downloadURL  https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_care_short.user.js
// @grant        GM_addStyle
// @run-at       document-end
// ==/UserScript==

(function() {
    'use strict';
    console.log('ğŸ’Š Senior Care Short ì‹œì‘');
    let isRunning = false, currentStep = 0, allResponses = [];
    const MAX_STEPS = 7;

    const STEP_PROMPTS = [
        { name: "ê¸°ìŠ¹ì „ê²° íŒ¨í„´ í•™ìŠµ", prompt: `1ë‹¨ê³„: ì‹œë‹ˆì–´ ê±´ê°• ê¸°ìŠ¹ì „ê²° íŒ¨í„´ í•™ìŠµ\në‹¹ì‹ ì€ ì‹œë‹ˆì–´(50-70ëŒ€) ê±´ê°• ì „ë¬¸ ìˆí¼ ì œì‘ìì…ë‹ˆë‹¤.\n\níŒ¨í„´ A - ì¦ìƒ ê³µê°í˜•: ê¸°(ì¦ìƒ ì œì‹œ) â†’ ìŠ¹(ì•…í™” ì‚¬ë¡€) â†’ ì „(ì˜í•™ì  ì„¤ëª…) â†’ ê²°(ëŒ€ì‘ë²•)\níŒ¨í„´ B - ìƒì‹ ê¹¨ê¸°í˜•: ê¸°(í”í•œ ë¯¿ìŒ) â†’ ìŠ¹(ì „ë¬¸ì˜ ë°˜ëŒ€) â†’ ì „(ì—°êµ¬ ê²°ê³¼) â†’ ê²°(ì˜¬ë°”ë¥¸ ë°©ë²•)\níŒ¨í„´ C - ì§ˆë³‘ ì‹ í˜¸í˜•: ê¸°(ì‚¬ì†Œí•œ ë³€í™”) â†’ ìŠ¹(ìœ„í—˜ ì‹ í˜¸) â†’ ì „(ì§ˆë³‘ ì—°ê´€ì„±) â†’ ê²°(ì²´í¬ë¦¬ìŠ¤íŠ¸)\n\ní•µì‹¬ ì›ì¹™: ì˜ë£Œë²• ì¤€ìˆ˜, í¬ë§ì  í†¤, ì „ë¬¸ì˜ ìƒë‹´ ê¶Œì¥\nì´í•´í–ˆìœ¼ë©´ 'íŒ¨í„´ í•™ìŠµ ì™„ë£Œ'`},
        { name: "ì½˜í…ì¸  íŠ¹ì„± í•™ìŠµ", prompt: `2ë‹¨ê³„: ì‹œë‹ˆì–´ ê±´ê°• íŠ¹ì„± í•™ìŠµ\n\níƒ€ê²Ÿ: 50-70ëŒ€ ê±´ê°• ê´€ì‹¬ì¸µ\ní„°ì§€ëŠ” ì£¼ì œ: ë§Œì„±ì§ˆí™˜, í†µì¦, ë…¸í™”ì¦ìƒ, ì†Œí™”/ìˆ˜ë©´, ì˜ˆë°©\ní›„í‚¹: "ë¬´ë¦ì´ ì‹œí°ê±°ë¦¬ì‹œë‚˜ìš”?", "ì´ ì¦ìƒ ë°©ì¹˜í•˜ë©´ ìœ„í—˜", "ì™œ ì•½ ë¨¹ì–´ë„ ì•ˆ ë‚˜ì„ê¹Œìš”?"\nê¸ˆì§€: íŠ¹ì • ì•½ë¬¼ ì–¸ê¸‰, "ë‚«ëŠ”ë‹¤" ë³´ì¥, ë³‘ì› ì¹˜ë£Œ ëŒ€ì²´ ì•”ì‹œ\ní•„ìˆ˜: ì „ë¬¸ì˜ ì¡°ì–¸, "ê°œì¸ì°¨ ìˆìŒ" ëª…ì‹œ, í¬ë§ì  ë§ˆë¬´ë¦¬\n\nì´í•´í–ˆìœ¼ë©´ 'íŠ¹ì„± í•™ìŠµ ì™„ë£Œ'`},
        { name: "ì£¼ì œ ì„ íƒ", prompt: `3ë‹¨ê³„: ê±´ê°• ì£¼ì œ ì„ íƒ\n\nì£¼ì œ í’€:\nê·¼ê³¨ê²©ê³„: ë¬´ë¦í†µì¦, í—ˆë¦¬ë””ìŠ¤í¬, ê³¨ë‹¤ê³µì¦, ì–´ê¹¨ì˜¤ì‹­ê²¬\nëŒ€ì‚¬/ìˆœí™˜ê¸°: ê³ í˜ˆì••ì•½, ë‹¹ë‡¨ì´ˆê¸°ì¦ìƒ, ì½œë ˆìŠ¤í…Œë¡¤, í˜ˆì•¡ìˆœí™˜\nì†Œí™”/ì˜ì–‘: ì†ì“°ë¦¼, ë³€ë¹„, ì˜ì–‘ì œê³¼ë‹¤, ì‹í›„ì¡¸ìŒ\në‡Œ/ì‹ ê²½: ì¹˜ë§¤vsê±´ë§ì¦, ì–´ì§€ëŸ¼ì¦, ì†ë°œì €ë¦¼, ë¶ˆë©´ì¦\n\ní•˜ë‚˜ ì„ íƒ í›„ í˜•ì‹ ì¶œë ¥:\nã€ì„ íƒí•œ ì£¼ì œã€‘:\nã€ì„ íƒ ì´ìœ ã€‘:\nã€ì ìš© íŒ¨í„´ã€‘: A~C\nã€íƒ€ê²Ÿ ê°ì •ã€‘: ê³µê°/ê²½ê°ì‹¬/ì•ˆì‹¬\nã€ì˜ˆìƒ í›„í‚¹ã€‘:`},
        { name: "êµ¬ì¡° ì„¤ê³„", prompt: `4ë‹¨ê³„: 40-50ì´ˆ êµ¬ì¡° ì„¤ê³„\n\nê¸°(0-8ì´ˆ): ì‹œë‹ˆì–´ ê³µê° ì¦ìƒ ì œì‹œ\nìŠ¹(8-20ì´ˆ): ëŒ€ìˆ˜ë¡­ì§€ ì•Šê²Œ ì—¬ê¸°ë‹¤ ì•…í™”\nì „(20-40ì´ˆ): ì „ë¬¸ì˜ ì„¤ëª…, ëŒ€ì‘ë²•\nê²°(40-50ì´ˆ): í¬ë§ì  ë©”ì‹œì§€, ì „ë¬¸ì˜ ìƒë‹´ ê¶Œì¥\n\nêµ¬ì¡°í‘œ ì‘ì„± í›„ ì´ˆì•ˆ ëŒ€ë³¸ ì‘ì„±\nì˜ë£Œë²• ì²´í¬: â–¡ ë³´ì¥í‘œí˜„ ì—†ìŒ â–¡ ì „ë¬¸ì˜ ìƒë‹´ í¬í•¨ â–¡ "ê°œì¸ì°¨" ëª…ì‹œ`},
        { name: "3ê°œ ë²„ì „ ìƒì„±", prompt: `5ë‹¨ê³„: 3ê°œ ë²„ì „ ìƒì„±\n\në§íˆ¬: "~í–ˆìŠµë‹ˆë‹¤/~í–ˆëŠ”ë°ìš”" ë²ˆê°ˆì•„, ì‰¼í‘œ/ë§ˆì¹¨í‘œ ê¸ˆì§€, 400-550ì\n\në²„ì „ 1: ì¦ìƒ ê³µê°í˜•\nã€í›„í‚¹ã€‘:\nã€ì™€ìš°ã€‘:\nã€ëŒ€ë³¸ã€‘:\n\`\`\`\n(ë‚´ìš©)\n\`\`\`\n\në²„ì „ 2: ì „ë¬¸ì˜ ì¸ìš©í˜•\në²„ì „ 3: ì˜ˆë°© ì‹¤ì²œí˜•`},
        { name: "ìµœì¢… ì„ íƒ", prompt: `6ë‹¨ê³„: ìµœì¢… ëŒ€ë³¸ ì„ íƒ\n\nì„ íƒ ê¸°ì¤€: ì‹œë‹ˆì–´ ê³µê°ë„, ì˜í•™ ì •í™•ì„±, í¬ë§ì  ë©”ì‹œì§€, ì˜ë£Œë²• ì¤€ìˆ˜\nê²€ì¦: â–¡ ê°€ì´ë“œë¼ì¸ ìœ„ë°˜ ì—†ìŒ â–¡ í—ˆìœ„ì •ë³´ ì—†ìŒ â–¡ ê¸€ììˆ˜ ì ì • â–¡ CTA ìì—°ìŠ¤ëŸ¬ì›€\n\nCTA ì˜ˆì‹œ: "ê±´ê°• ì •ë³´ ë„ì›€ë˜ì…¨ë‹¤ë©´ ì¢‹ì•„ìš”", "ì „ë¬¸ì˜ ìƒë‹´ ê¼­ ë°›ìœ¼ì„¸ìš”"\n\nìµœì¢… ì„ íƒ ë²„ì „ê³¼ ìˆ˜ì •ì‚¬í•­, ê²€ì¦ê²°ê³¼, ìµœì¢… ëŒ€ë³¸ ì¶œë ¥`},
        { name: "ìµœì¢… ì¶œë ¥", prompt: `7ë‹¨ê³„: ìµœì¢… ì¶œë ¥\n\nâ›” ë§ˆì»¤ ë°– í…ìŠ¤íŠ¸ ê¸ˆì§€\n\n---SCRIPT_START---\n(ìµœì¢… ëŒ€ë³¸ ì „ì²´)\n---SCRIPT_END---\n\n---PROMPTS_START---\n1. Elderly Korean person feeling knee pain, realistic photo, concerned expression, home interior, 9:16\n2. Medical illustration knee joint inflammation, educational style, professional diagram, 9:16\n3. Korean senior at doctor consultation, friendly doctor with tablet, modern clinic, 9:16\n4. Senior doing gentle knee exercises, peaceful home, healthy lifestyle, soft light, 9:16\n5. Healthy food for joint health, colorful vegetables supplements, overhead view, 9:16\n6. Senior walking pain-free in park, sunrise, recovery concept, cinematic, 9:16\n7. Hands holding medical report positive results, relief hope, intimate lighting, 9:16\n8. Senior smiling while exercising, active lifestyle, inspiring, golden hour, 9:16\n9. Traditional herbal modern medicine together, holistic health, 9:16\n10. Senior couple walking happily, healthy aging, warm afternoon, emotional, 9:16\n---PROMPTS_END---`}
    ];

    GM_addStyle(`#script-automation-panel{position:fixed;top:20px;right:20px;width:420px;background:linear-gradient(135deg,#FF6B9D,#FFA06B);color:white;padding:25px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.15);z-index:10000;font-family:'Segoe UI',sans-serif}#script-automation-panel h3{margin:0 0 15px 0;font-size:19px;text-align:center;font-weight:600}.category-badge{background:rgba(255,255,255,0.3);padding:6px 18px;border-radius:20px;font-size:11px;display:inline-block;margin-bottom:15px;font-weight:600}.step-counter{text-align:center;font-size:20px;font-weight:600;margin:15px 0;padding:14px;background:rgba(255,255,255,0.2);border-radius:10px}.step-name{font-size:12px;opacity:0.85;margin-top:6px}#start-btn,#stop-btn{width:100%;padding:16px;font-size:15px;font-weight:600;border:none;border-radius:10px;cursor:pointer;margin-bottom:10px;transition:all 0.3s}#start-btn{background:linear-gradient(135deg,#10B981,#34D399);color:white;box-shadow:0 4px 14px rgba(16,185,129,0.4)}#start-btn:disabled{background:#999;cursor:not-allowed;opacity:0.5}#stop-btn{background:linear-gradient(135deg,#FF6B6B,#EE5A6F);color:white;display:none}#download-btn{width:100%;padding:16px;background:linear-gradient(135deg,#3498db,#2980b9);color:white;border:none;border-radius:10px;cursor:pointer;font-weight:600;margin-bottom:10px}#download-btn:disabled{background:#999;opacity:0.5}.progress-bar{width:100%;height:6px;background:rgba(255,255,255,0.2);border-radius:3px;margin:12px 0}.progress-fill{height:100%;background:linear-gradient(90deg,#10B981,#34D399);width:0%;transition:width 0.5s}#automation-status{background:rgba(0,0,0,0.15);padding:12px;border-radius:10px;margin-top:12px;font-size:12px;max-height:160px;overflow-y:auto}.status-line{margin:4px 0;padding:6px 8px;background:rgba(255,255,255,0.1);border-radius:6px;font-size:11px;line-height:1.4}.status-line.success{background:rgba(16,185,129,0.3)}.status-line.error{background:rgba(255,107,107,0.25)}`);

    function sleep(ms){return new Promise(r=>setTimeout(r,ms))}
    function addStatus(msg,type='normal'){const s=document.getElementById('automation-status');if(!s)return;const l=document.createElement('div');l.className=`status-line ${type}`;l.textContent=`[${new Date().toLocaleTimeString()}] ${msg}`;s.insertBefore(l,s.firstChild);while(s.children.length>15)s.removeChild(s.lastChild);console.log(msg)}
    function updateStepDisplay(){const sc=document.getElementById('step-count'),sn=document.getElementById('step-name'),pf=document.getElementById('progress-fill');if(sc)sc.textContent=`${currentStep}/${MAX_STEPS}`;if(sn&&currentStep>0&&currentStep<=MAX_STEPS)sn.textContent=STEP_PROMPTS[currentStep-1].name;if(pf)pf.style.width=`${(currentStep/MAX_STEPS)*100}%`}
    function isClaudeResponding(){return!!document.querySelector('button[aria-label="Stop response"]')||!!document.querySelector('button[aria-label="ì‘ë‹µ ì¤‘ë‹¨"]')}
    async function waitForResponseComplete(maxWait=1800000){const start=Date.now();addStatus('â³ ì‘ë‹µ ëŒ€ê¸°');let started=false;for(let i=0;i<40;i++){if(isClaudeResponding()){started=true;addStatus('âœï¸ ì‘ë‹µ ì¤‘');break}await sleep(500)}if(!started){addStatus('âœ… ì‘ë‹µ ì™„ë£Œ');await sleep(2000);return true}let cnt=0;while(isClaudeResponding()){const elapsed=Date.now()-start;if(elapsed>maxWait)throw new Error('íƒ€ì„ì•„ì›ƒ');cnt++;if(cnt%30===0){const m=Math.floor(elapsed/60000),s=Math.floor((elapsed%60000)/1000);addStatus(`â³ ëŒ€ê¸° ì¤‘ (${m}ë¶„ ${s}ì´ˆ)`)}await sleep(1000)}addStatus('âœ… ì‘ë‹µ ì™„ë£Œ!','success');await sleep(2000);return true}
    async function inputPrompt(promptText,maxRetries=5){for(let attempt=1;attempt<=maxRetries;attempt++){try{addStatus(`[${attempt}/${maxRetries}] ì „ì†¡ ì‹œë„`);const inputField=document.querySelector('div.ProseMirror[contenteditable="true"]');if(!inputField)throw new Error('ì…ë ¥ í•„ë“œ ì—†ìŒ');inputField.focus();inputField.click();await sleep(200);inputField.innerHTML='';promptText.split('\n').forEach((line,i)=>{if(line.trim()){const p=document.createElement('p');p.textContent=line;inputField.appendChild(p)}else if(i<promptText.split('\n').length-1)inputField.appendChild(document.createElement('br'))});inputField.dispatchEvent(new Event('input',{bubbles:true}));await sleep(500);let sendButton=document.querySelector('button[aria-label="Send message"]');if(!sendButton){sendButton=Array.from(document.querySelectorAll('button')).find(btn=>{const svg=btn.querySelector('svg'),path=svg?.querySelector('path'),d=path?.getAttribute('d');return d?.includes('M208.49,120.49')})}if(!sendButton||sendButton.disabled)throw new Error('ì „ì†¡ ë²„íŠ¼ ì—†ìŒ');sendButton.click();addStatus('âœ… ì „ì†¡ ì„±ê³µ!','success');await waitForResponseComplete();return true}catch(error){addStatus(`âš ï¸ ì‹¤íŒ¨: ${error.message}`,'error');if(attempt<maxRetries){await sleep(attempt*2000)}else throw error}}}
    function collectResponse(){try{const responses=document.querySelectorAll('div[class*="font-claude-response"]');if(currentStep===MAX_STEPS){for(let i=responses.length-1;i>=0;i--){const txt=responses[i].innerText.trim();const ss='---SCRIPT_START---',se='---SCRIPT_END---',ps='---PROMPTS_START---',pe='---PROMPTS_END---';if(txt.includes(ss)&&txt.includes(se)){const script=txt.substring(txt.indexOf(ss)+ss.length,txt.indexOf(se)).trim();let prompts=[];if(txt.includes(ps)&&txt.includes(pe)){const ptxt=txt.substring(txt.indexOf(ps)+ps.length,txt.indexOf(pe)).trim();prompts=ptxt.split(/\n?\d+\.\s*/).map(l=>l.trim()).filter(l=>l.length>10);if(prompts.length<5)prompts=ptxt.split('\n').map(l=>l.trim()).filter(l=>l.length>20)}localStorage.setItem('FINAL_SCRIPT',script);window.FINAL_SCRIPT_FOR_PYTHON=script;if(prompts.length>0){localStorage.setItem('IMAGE_PROMPTS',JSON.stringify(prompts));window.IMAGE_PROMPTS=prompts;localStorage.setItem('MOTIVATION_SCRIPT_JSON',JSON.stringify({image_prompts:prompts}))}return script}}}if(responses.length>0){const last=responses[responses.length-1];return last.innerText.trim()}return ''}catch(e){console.error(e);return ''}}
    function createPanel(){const panel=document.createElement('div');panel.id='script-automation-panel';panel.innerHTML=`<h3>ğŸ’Š ì‹œë‹ˆì–´ ì¼€ì–´ ìˆí¼</h3><div style="text-align:center;"><span class="category-badge">HEALTH CARE</span></div><div class="step-counter">ë‹¨ê³„: <span id="step-count">0/7</span><div class="step-name" id="step-name">ëŒ€ê¸° ì¤‘</div></div><div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div><button id="start-btn">ğŸš€ ëŒ€ë³¸ ìƒì„± ì‹œì‘</button><button id="stop-btn">â¹ ì¤‘ì§€</button><button id="download-btn" disabled>âœ… ì‘ì—… ì™„ë£Œ</button><div id="automation-status"></div>`;document.body.appendChild(panel);document.getElementById('start-btn').addEventListener('click',startGeneration);document.getElementById('stop-btn').addEventListener('click',stopGeneration)}
    async function startGeneration(){isRunning=true;currentStep=0;allResponses=[];document.getElementById('start-btn').style.display='none';document.getElementById('stop-btn').style.display='block';document.getElementById('download-btn').disabled=true;addStatus('ğŸš€ ìƒì„± ì‹œì‘!','success');function keepAlive(){if(isRunning)requestAnimationFrame(keepAlive)}keepAlive();while(isRunning&&currentStep<MAX_STEPS){const step=STEP_PROMPTS[currentStep];currentStep++;updateStepDisplay();addStatus(`ğŸ“ ${currentStep}ë‹¨ê³„: ${step.name}`);try{const success=await inputPrompt(step.prompt);if(!success){addStatus(`âŒ ${step.name} ì‹¤íŒ¨`,'error');await sleep(3000);currentStep--;continue}await sleep(2000);let cc=0;while(cc<2){const cont=await handleContinue();if(cont){cc++;await waitForResponseComplete()}else break}const res=collectResponse();allResponses.push({step:`${currentStep}. ${step.name}`,response:res});addStatus(`âœ… ${step.name} ì™„ë£Œ`,'success')}catch(e){addStatus(`âš ï¸ ì˜¤ë¥˜: ${e.message}`,'error');await sleep(5000);currentStep--}await sleep(3000)}stopGeneration()}
    async function handleContinue(){await sleep(2000);const btn=Array.from(document.querySelectorAll('button')).find(b=>b.textContent.includes('Continue')||b.textContent.includes('ê³„ì†'));if(btn){btn.click();addStatus('âœ… Continue í´ë¦­');return true}return false}
    function stopGeneration(){isRunning=false;document.getElementById('start-btn').style.display='block';document.getElementById('stop-btn').style.display='none';if(currentStep>=MAX_STEPS){addStatus('ğŸ‰ ìƒì„± ì™„ë£Œ!','success');document.getElementById('download-btn').disabled=false}}
    function init(){if(!document.body){setTimeout(init,1000);return}const existing=document.getElementById('script-automation-panel');if(existing)existing.remove();try{createPanel();addStatus('âœ… ì¤€ë¹„ ì™„ë£Œ')}catch(e){console.error(e)}}
    document.addEventListener('keydown',e=>{if(e.key==='Escape'){const p=document.getElementById('script-automation-panel');if(p)p.style.display=p.style.display==='none'?'block':'none'}});
    function waitForPageLoad(){const body=document.body,main=document.querySelector('main');if(body&&main&&(document.readyState==='interactive'||document.readyState==='complete')){setTimeout(()=>{init();setTimeout(()=>{if(!document.getElementById('script-automation-panel'))init()},500)},2000)}else setTimeout(waitForPageLoad,500)}
    waitForPageLoad()
})();

(function(){'use strict';function killPopup(){document.querySelectorAll('[role="dialog"]').forEach(d=>{if((d.textContent||'').includes('Claudeë¥¼ ê³„ì†')||(d.textContent||'').includes('Continue using'))d.remove()});document.body.style.overflow=''}const obs=new MutationObserver(killPopup);obs.observe(document.body,{childList:true,subtree:true});setInterval(killPopup,2000)})();
