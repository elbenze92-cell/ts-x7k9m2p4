// ==UserScript==
// @name         Claude Automation - senior_guide_short
// @namespace    http://tampermonkey.net/
// @version      1.0.0
// @description  ì‹œë‹ˆì–´ ê°€ì´ë“œ ìˆí¼ ëŒ€ë³¸ ìƒì„±
// @author       Atobro
// @match        https://claude.ai/project/019b085a-2bc1-766a-9c18-e6ae467bf5da
// @updateURL    https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_guide_short.user.js
// @downloadURL  https://cdn.jsdelivr.net/gh/elbenze92-cell/ts-x7k9m2p4@main/senior_guide_short.user.js
// @grant        GM_addStyle
// @run-at       document-end
// ==/UserScript==

(function() {
    'use strict';
    console.log('ğŸ“– Senior Guide Short ì‹œì‘');
    let isRunning = false, currentStep = 0, allResponses = [];
    const MAX_STEPS = 7;

    const STEP_PROMPTS = [
        { name: "ê¸°ìŠ¹ì „ê²° íŒ¨í„´ í•™ìŠµ", prompt: `1ë‹¨ê³„: ì‹œë‹ˆì–´ ìƒí™œ ê°€ì´ë“œ ê¸°ìŠ¹ì „ê²° íŒ¨í„´ í•™ìŠµ\në‹¹ì‹ ì€ ì‹œë‹ˆì–´(50-70ëŒ€) ìƒí™œ ì „ë¬¸ ìˆí¼ ì œì‘ìì…ë‹ˆë‹¤.\n\níŒ¨í„´ A - ë¶ˆí¸ í•´ê²°í˜•: ê¸°(ì¼ìƒ ë¶ˆí¸) â†’ ìŠ¹(ì°¸ê³  ì‚¬ëŠ” í˜„ì‹¤) â†’ ì „(ê°„ë‹¨í•œ í•´ê²°ë²•) â†’ ê²°("ì´ë ‡ê²Œ ì‰¬ì› ìŠµë‹ˆë‹¤")\níŒ¨í„´ B - ì†í•´ ë°©ì§€í˜•: ê¸°(ëª¨ë¥´ë©´ ì†í•´ ì œë„) â†’ ìŠ¹("ì•„ë¬´ë„ ì•ˆ ì•Œë ¤ì¤ë‹ˆë‹¤") â†’ ì „(ì‹ ì²­ ë°©ë²•) â†’ ê²°(ì‹¤ì œ í›„ê¸°)\níŒ¨í„´ C - ì Šê²Œ ì‚¬ëŠ” ë¹„ê²°í˜•: ê¸°(ì Šì–´ ë³´ì´ëŠ” ì‚¬ëŒë“¤) â†’ ìŠ¹(ë¹„ê²°ì€ ê°„ë‹¨) â†’ ì „(ì¼ìƒ ìŠµê´€ 3ê°€ì§€) â†’ ê²°("ì˜¤ëŠ˜ë¶€í„° ì‹œì‘")\n\ní•µì‹¬ ì›ì¹™: ì‹œë‹ˆì–´ ëˆˆë†’ì´, ë³µì¡í•œ ì ˆì°¨ ê°„ë‹¨íˆ, ì‹¤ìƒí™œ ì ìš© ê°€ëŠ¥, ê¸ì •ì  í†¤\nì´í•´í–ˆìœ¼ë©´ 'íŒ¨í„´ í•™ìŠµ ì™„ë£Œ'`},
        { name: "ì½˜í…ì¸  íŠ¹ì„± í•™ìŠµ", prompt: `2ë‹¨ê³„: ì‹œë‹ˆì–´ ìƒí™œ ê°€ì´ë“œ íŠ¹ì„± í•™ìŠµ\n\níƒ€ê²Ÿ: 55-75ëŒ€ ì‹¤ìš© ì •ë³´ ì„ í˜¸ì¸µ\ní„°ì§€ëŠ” ì£¼ì œ: ì •ë¶€í˜œíƒ, ìŠ¤ë§ˆíŠ¸í°, ìƒí™œí¸ì˜, ê¸ˆìœµ, ì·¨ë¯¸\ní›„í‚¹: "ì´ê±° ëª¨ë¥´ë©´ ë§¤ë‹¬ OOë§Œì› ì†í•´", "5ë¶„ì´ë©´ ì‹ ì²­ ì™„ë£Œ"\nê¸ˆì§€: ë³µì¡í•œ ë²•ë¥  ìš©ì–´, ì–´ë ¤ìš´ ì¸í„°ë„· ìš©ì–´, ë„ˆë¬´ ê¸´ ì ˆì°¨\ní•„ìˆ˜: ë‹¨ê³„ë³„ ëª…í™•í•œ ì•ˆë‚´, "ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤", ë¬¸ì˜ì²˜ ì •ë³´\n\nì´í•´í–ˆìœ¼ë©´ 'íŠ¹ì„± í•™ìŠµ ì™„ë£Œ'`},
        { name: "ì£¼ì œ ì„ íƒ", prompt: `3ë‹¨ê³„: ìƒí™œ ê°€ì´ë“œ ì£¼ì œ ì„ íƒ\n\nì£¼ì œ í’€:\nì •ë¶€/ë³µì§€: ê¸°ì´ˆì—°ê¸ˆ ë” ë°›ëŠ” ë²•, ê²½ë¡œìš°ëŒ€ ìˆ¨ì€ í˜œíƒ, ì˜ë£Œë¹„ í™˜ê¸‰, ë¬´ë£Œ ê±´ê°•ê²€ì§„\nìŠ¤ë§ˆíŠ¸í°: ì‚¬ê¸° ë¬¸ì êµ¬ë³„ë²•, ë„¤ì´ë²„ ì§€ë„ ë”°ë¼í•˜ê¸°, ì¹´í†¡ ì‚¬ì§„ ì €ì¥, ìœ íŠœë¸Œ ê´‘ê³  ê±´ë„ˆë›°ê¸°\nìƒí™œí¸ì˜: ê¹€ì¥ ì‰½ê²Œ í•˜ëŠ” ë²•, ë¬µì€ ë•Œ ì œê±°, ëƒ‰ì¥ê³  ì •ë¦¬, ì „ê¸°ë£Œ ì ˆì•½\nê¸ˆìœµ/ìì‚°: ì€í–‰ ìˆ˜ìˆ˜ë£Œ ì•ˆ ë‚´ëŠ” ë²•, í˜„ëª…í•œ ì¦ì—¬, ë³´í—˜ ì •ë¦¬, ì—°ê¸ˆ ìˆ˜ë ¹ ì‹œê¸°\n\ní•˜ë‚˜ ì„ íƒ í›„ í˜•ì‹ ì¶œë ¥:\nã€ì„ íƒí•œ ì£¼ì œã€‘:\nã€ì„ íƒ ì´ìœ ã€‘:\nã€ì ìš© íŒ¨í„´ã€‘: A~C\nã€íƒ€ê²Ÿ ê°ì •ã€‘: ì•ˆë„/ê¸°ì¨/ë™ê¸°ë¶€ì—¬\nã€ì˜ˆìƒ í›„í‚¹ã€‘:`},
        { name: "êµ¬ì¡° ì„¤ê³„", prompt: `4ë‹¨ê³„: 40-50ì´ˆ êµ¬ì¡° ì„¤ê³„\n\nê¸°(0-8ì´ˆ): ì‹œë‹ˆì–´ê°€ ëª¨ë¥´ë©´ ì†í•´, êµ¬ì²´ì  í˜œíƒ ê¸ˆì•¡\nìŠ¹(8-20ì´ˆ): "ëŒ€ë¶€ë¶„ ëª¨ë¥´ê³  ë„˜ì–´ê°‘ë‹ˆë‹¤", ì™œ ëª°ëëŠ”ì§€\nì „(20-40ì´ˆ): ì‹ ì²­ ë°©ë²• ë‹¨ê³„ë³„ ì•ˆë‚´, "ì •ë§ ì‰½ìŠµë‹ˆë‹¤"\nê²°(40-50ì´ˆ): ì‹¤ì œ ë°›ì€ ì‚¬ëŒ í›„ê¸°, "ì˜¤ëŠ˜ ë°”ë¡œ ì‹ ì²­í•˜ì„¸ìš”"\n\nêµ¬ì¡°í‘œ ì‘ì„± í›„ ì´ˆì•ˆ ëŒ€ë³¸ ì‘ì„±\nì‹¤ìš©ì„± ì²´í¬: â–¡ ë°”ë¡œ ì‹¤ì²œ ê°€ëŠ¥ â–¡ ë‹¨ê³„ë³„ ëª…í™• â–¡ ë¬¸ì˜ì²˜ ëª…ì‹œ`},
        { name: "3ê°œ ë²„ì „ ìƒì„±", prompt: `5ë‹¨ê³„: 3ê°œ ë²„ì „ ìƒì„±\n\në§íˆ¬: "~í–ˆìŠµë‹ˆë‹¤/~í–ˆëŠ”ë°ìš”" ë²ˆê°ˆì•„, ì‰¼í‘œ/ë§ˆì¹¨í‘œ ê¸ˆì§€, 400-550ì\n\në²„ì „ 1: í˜œíƒ ê°•ì¡°í˜•\nã€í›„í‚¹ã€‘:\nã€ì™€ìš°ã€‘:\nã€ëŒ€ë³¸ã€‘:\n\`\`\`\n(ë‚´ìš©)\n\`\`\`\n\në²„ì „ 2: ì ˆì°¨ ì•ˆë‚´í˜•\në²„ì „ 3: í›„ê¸° ì¤‘ì‹¬í˜•`},
        { name: "ìµœì¢… ì„ íƒ", prompt: `6ë‹¨ê³„: ìµœì¢… ëŒ€ë³¸ ì„ íƒ\n\nì„ íƒ ê¸°ì¤€: ì‹¤ìš©ì„±, ì´í•´ ìš©ì´ì„±, ì¦‰ì‹œ ì‹¤ì²œ ê°€ëŠ¥, ê¸ì •ì  íš¨ê³¼\nê²€ì¦: â–¡ ì •ë³´ ì •í™•ì„± â–¡ ì ˆì°¨ ëª…í™•ì„± â–¡ ê¸€ììˆ˜ ì ì • â–¡ CTA íš¨ê³¼ì \n\nCTA ì˜ˆì‹œ: "ë„ì›€ë˜ì…¨ë‹¤ë©´ ì¢‹ì•„ìš”", "ì˜¤ëŠ˜ ë°”ë¡œ ì‹ ì²­í•˜ì„¸ìš”"\n\nìµœì¢… ì„ íƒ ë²„ì „ê³¼ ìˆ˜ì •ì‚¬í•­, ê²€ì¦ê²°ê³¼, ìµœì¢… ëŒ€ë³¸ ì¶œë ¥`},
        { name: "ìµœì¢… ì¶œë ¥", prompt: `7ë‹¨ê³„: ìµœì¢… ì¶œë ¥\n\nâ›” ë§ˆì»¤ ë°– í…ìŠ¤íŠ¸ ê¸ˆì§€\n\n---SCRIPT_START---\n(ìµœì¢… ëŒ€ë³¸ ì „ì²´)\n---SCRIPT_END---\n\n---PROMPTS_START---\n1. Korean senior looking confused at smartphone, trying government app, home interior, natural lighting, 9:16\n2. Government welfare office counter, senior receiving guidance, modern clean office, reassuring, 9:16\n3. Smartphone screen showing application process, clear UI, educational style, vertical format, 9:16\n4. Senior successfully receiving bank transfer, happy relieved expression, at home, 9:16\n5. Korean senior helping another with smartphone, community support, warm afternoon light, 9:16\n6. Hands holding welfare benefit approval, sense of relief joy, intimate lighting, 9:16\n7. Senior couple checking increased bank balance, smiling together, financial security, 9:16\n8. Community center seniors learning together, educational program, supportive atmosphere, 9:16\n9. Senior confidently using smartphone services, empowered lifestyle, modern life, 9:16\n10. Happy senior at cafe spending saved money, enjoying life, golden hour, emotional satisfaction, 9:16\n---PROMPTS_END---`}
    ];

    GM_addStyle(`#script-automation-panel{position:fixed;top:20px;right:20px;width:420px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:25px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.15);z-index:10000;font-family:'Segoe UI',sans-serif}#script-automation-panel h3{margin:0 0 15px 0;font-size:19px;text-align:center;font-weight:600}.category-badge{background:rgba(255,255,255,0.3);padding:6px 18px;border-radius:20px;font-size:11px;display:inline-block;margin-bottom:15px;font-weight:600}.step-counter{text-align:center;font-size:20px;font-weight:600;margin:15px 0;padding:14px;background:rgba(255,255,255,0.2);border-radius:10px}.step-name{font-size:12px;opacity:0.85;margin-top:6px}#start-btn,#stop-btn{width:100%;padding:16px;font-size:15px;font-weight:600;border:none;border-radius:10px;cursor:pointer;margin-bottom:10px;transition:all 0.3s}#start-btn{background:linear-gradient(135deg,#10B981,#34D399);color:white;box-shadow:0 4px 14px rgba(16,185,129,0.4)}#start-btn:disabled{background:#999;cursor:not-allowed;opacity:0.5}#stop-btn{background:linear-gradient(135deg,#FF6B6B,#EE5A6F);color:white;display:none}#download-btn{width:100%;padding:16px;background:linear-gradient(135deg,#3498db,#2980b9);color:white;border:none;border-radius:10px;cursor:pointer;font-weight:600;margin-bottom:10px}#download-btn:disabled{background:#999;opacity:0.5}.progress-bar{width:100%;height:6px;background:rgba(255,255,255,0.2);border-radius:3px;margin:12px 0}.progress-fill{height:100%;background:linear-gradient(90deg,#10B981,#34D399);width:0%;transition:width 0.5s}#automation-status{background:rgba(0,0,0,0.15);padding:12px;border-radius:10px;margin-top:12px;font-size:12px;max-height:160px;overflow-y:auto}.status-line{margin:4px 0;padding:6px 8px;background:rgba(255,255,255,0.1);border-radius:6px;font-size:11px;line-height:1.4}.status-line.success{background:rgba(16,185,129,0.3)}.status-line.error{background:rgba(255,107,107,0.25)}`);

    function sleep(ms){return new Promise(r=>setTimeout(r,ms))}
    function addStatus(msg,type='normal'){const s=document.getElementById('automation-status');if(!s)return;const l=document.createElement('div');l.className=`status-line ${type}`;l.textContent=`[${new Date().toLocaleTimeString()}] ${msg}`;s.insertBefore(l,s.firstChild);while(s.children.length>15)s.removeChild(s.lastChild);console.log(msg)}
    function updateStepDisplay(){const sc=document.getElementById('step-count'),sn=document.getElementById('step-name'),pf=document.getElementById('progress-fill');if(sc)sc.textContent=`${currentStep}/${MAX_STEPS}`;if(sn&&currentStep>0&&currentStep<=MAX_STEPS)sn.textContent=STEP_PROMPTS[currentStep-1].name;if(pf)pf.style.width=`${(currentStep/MAX_STEPS)*100}%`}
    function isClaudeResponding(){return!!document.querySelector('button[aria-label="Stop response"]')||!!document.querySelector('button[aria-label="ì‘ë‹µ ì¤‘ë‹¨"]')}
    async function waitForResponseComplete(maxWait=1800000){const start=Date.now();addStatus('â³ ì‘ë‹µ ëŒ€ê¸°');let started=false;for(let i=0;i<40;i++){if(isClaudeResponding()){started=true;addStatus('âœï¸ ì‘ë‹µ ì¤‘');break}await sleep(500)}if(!started){addStatus('âœ… ì‘ë‹µ ì™„ë£Œ');await sleep(2000);return true}let cnt=0;while(isClaudeResponding()){const elapsed=Date.now()-start;if(elapsed>maxWait)throw new Error('íƒ€ì„ì•„ì›ƒ');cnt++;if(cnt%30===0){const m=Math.floor(elapsed/60000),s=Math.floor((elapsed%60000)/1000);addStatus(`â³ ëŒ€ê¸° ì¤‘ (${m}ë¶„ ${s}ì´ˆ)`)}await sleep(1000)}addStatus('âœ… ì‘ë‹µ ì™„ë£Œ!','success');await sleep(2000);return true}
    async function inputPrompt(promptText,maxRetries=5){for(let attempt=1;attempt<=maxRetries;attempt++){try{addStatus(`[${attempt}/${maxRetries}] ì „ì†¡ ì‹œë„`);const inputField=document.querySelector('div.ProseMirror[contenteditable="true"]');if(!inputField)throw new Error('ì…ë ¥ í•„ë“œ ì—†ìŒ');inputField.focus();inputField.click();await sleep(200);inputField.innerHTML='';promptText.split('\n').forEach((line,i)=>{if(line.trim()){const p=document.createElement('p');p.textContent=line;inputField.appendChild(p)}else if(i<promptText.split('\n').length-1)inputField.appendChild(document.createElement('br'))});inputField.dispatchEvent(new Event('input',{bubbles:true}));await sleep(500);let sendButton=document.querySelector('button[aria-label="Send message"]');if(!sendButton){sendButton=Array.from(document.querySelectorAll('button')).find(btn=>{const svg=btn.querySelector('svg'),path=svg?.querySelector('path'),d=path?.getAttribute('d');return d?.includes('M208.49,120.49')})}if(!sendButton||sendButton.disabled)throw new Error('ì „ì†¡ ë²„íŠ¼ ì—†ìŒ');sendButton.click();addStatus('âœ… ì „ì†¡ ì„±ê³µ!','success');await waitForResponseComplete();return true}catch(error){addStatus(`âš ï¸ ì‹¤íŒ¨: ${error.message}`,'error');if(attempt<maxRetries){await sleep(attempt*2000)}else throw error}}}
    function collectResponse(){try{const responses=document.querySelectorAll('div[class*="font-claude-response"]');if(currentStep===MAX_STEPS){for(let i=responses.length-1;i>=0;i--){const txt=responses[i].innerText.trim();const ss='---SCRIPT_START---',se='---SCRIPT_END---',ps='---PROMPTS_START---',pe='---PROMPTS_END---';if(txt.includes(ss)&&txt.includes(se)){const script=txt.substring(txt.indexOf(ss)+ss.length,txt.indexOf(se)).trim();let prompts=[];if(txt.includes(ps)&&txt.includes(pe)){const ptxt=txt.substring(txt.indexOf(ps)+ps.length,txt.indexOf(pe)).trim();prompts=ptxt.split(/\n?\d+\.\s*/).map(l=>l.trim()).filter(l=>l.length>10);if(prompts.length<5)prompts=ptxt.split('\n').map(l=>l.trim()).filter(l=>l.length>20)}localStorage.setItem('FINAL_SCRIPT',script);window.FINAL_SCRIPT_FOR_PYTHON=script;if(prompts.length>0){localStorage.setItem('IMAGE_PROMPTS',JSON.stringify(prompts));window.IMAGE_PROMPTS=prompts;localStorage.setItem('MOTIVATION_SCRIPT_JSON',JSON.stringify({image_prompts:prompts}))}return script}}}if(responses.length>0){const last=responses[responses.length-1];return last.innerText.trim()}return ''}catch(e){console.error(e);return ''}}
    function createPanel(){const panel=document.createElement('div');panel.id='script-automation-panel';panel.innerHTML=`<h3>ğŸ“– ì‹œë‹ˆì–´ ê°€ì´ë“œ ìˆí¼</h3><div style="text-align:center;"><span class="category-badge">LIFE GUIDE</span></div><div class="step-counter">ë‹¨ê³„: <span id="step-count">0/7</span><div class="step-name" id="step-name">ëŒ€ê¸° ì¤‘</div></div><div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div><button id="start-btn">ğŸš€ ëŒ€ë³¸ ìƒì„± ì‹œì‘</button><button id="stop-btn">â¹ ì¤‘ì§€</button><button id="download-btn" disabled>âœ… ì‘ì—… ì™„ë£Œ</button><div id="automation-status"></div>`;document.body.appendChild(panel);document.getElementById('start-btn').addEventListener('click',startGeneration);document.getElementById('stop-btn').addEventListener('click',stopGeneration)}
    async function startGeneration(){isRunning=true;currentStep=0;allResponses=[];document.getElementById('start-btn').style.display='none';document.getElementById('stop-btn').style.display='block';document.getElementById('download-btn').disabled=true;addStatus('ğŸš€ ìƒì„± ì‹œì‘!','success');function keepAlive(){if(isRunning)requestAnimationFrame(keepAlive)}keepAlive();while(isRunning&&currentStep<MAX_STEPS){const step=STEP_PROMPTS[currentStep];currentStep++;updateStepDisplay();addStatus(`ğŸ“ ${currentStep}ë‹¨ê³„: ${step.name}`);try{const success=await inputPrompt(step.prompt);if(!success){addStatus(`âŒ ${step.name} ì‹¤íŒ¨`,'error');await sleep(3000);currentStep--;continue}await sleep(2000);let cc=0;while(cc<2){const cont=await handleContinue();if(cont){cc++;await waitForResponseComplete()}else break}const res=collectResponse();allResponses.push({step:`${currentStep}. ${step.name}`,response:res});addStatus(`âœ… ${step.name} ì™„ë£Œ`,'success')}catch(e){addStatus(`âš ï¸ ì˜¤ë¥˜: ${e.message}`,'error');await sleep(5000);currentStep--}await sleep(3000)}stopGeneration()}
    async function handleContinue(){await sleep(2000);const btn=Array.from(document.querySelectorAll('button')).find(b=>b.textContent.includes('Continue')||b.textContent.includes('ê³„ì†'));if(btn){btn.click();addStatus('âœ… Continue í´ë¦­');return true}return false}
    function stopGeneration(){isRunning=false;document.getElementById('start-btn').style.display='block';document.getElementById('stop-btn').style.display='none';if(currentStep>=MAX_STEPS){addStatus('ğŸ‰ ìƒì„± ì™„ë£Œ!','success');document.getElementById('download-btn').disabled=false}}
    function init(){if(!document.body){setTimeout(init,1000);return}const existing=document.getElementById('script-automation-panel');if(existing)existing.remove();try{createPanel();addStatus('âœ… ì¤€ë¹„ ì™„ë£Œ')}catch(e){console.error(e)}}
    document.addEventListener('keydown',e=>{if(e.key==='Escape'){const p=document.getElementById('script-automation-panel');if(p)p.style.display=p.style.display==='none'?'block':'none'}});
    function waitForPageLoad(){const body=document.body,main=document.querySelector('main');if(body&&main&&(document.readyState==='interactive'||document.readyState==='complete')){setTimeout(()=>{init();setTimeout(()=>{if(!document.getElementById('script-automation-panel'))init()},500)},2000)}else setTimeout(waitForPageLoad,500)}
    waitForPageLoad()
})();

(function(){'use strict';function killPopup(){document.querySelectorAll('[role="dialog"]').forEach(d=>{if((d.textContent||'').includes('Claudeë¥¼ ê³„ì†')||(d.textContent||'').includes('Continue using'))d.remove()});document.body.style.overflow=''}const obs=new MutationObserver(killPopup);obs.observe(document.body,{childList:true,subtree:true});setInterval(killPopup,2000)})();
